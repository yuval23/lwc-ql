<template>
    <div class="app-container">
        <lightning-card icon-name="utility:home" title={pathName}>
            <div slot="actions" class="slds-grid slds-grid_align-center">
                <!-- RUN GRAPH QL -->
                <lightning-button-icon icon-name="utility:refresh" variant="brand" onclick={handleClick}></lightning-button-icon>
            </div>
<!-- TABS -->
<lightning-tabset variant="scoped" active-tab-value={activeTab}>
<!-- STEP 1 -->
<lightning-tab icon-name="utility:fallback" label="Simple" value="intro" onactive={handleActiveTab}>
    <div class="slds-grid slds-wrap">
        <lightning-input class="slds-size_1-of-1" name="messageInput" value={message} label="message" field-level-help="Whatever you send you will get back via GraphQL" onchange={handleInputChange}></lightning-input>
    </div>
</lightning-tab>
<!-- SFDX -->
<lightning-tab icon-name="utility:apex" label="DX CLI" value="sfdx" onactive={handleActiveTab}>
    <div class="slds-grid slds-wrap">
        <lightning-input class="slds-size_1-of-2" name="commandInput" value={command} label="Command" disabled field-level-help="Beta command display"></lightning-input>
        <div class="slds-size_1-of-2">
            <template for:each={flags} for:item="flag" for:index="index">
                <div key={flag.index} class="slds-grid slds-p-horizontal_small slds-grid_align-spread">
                    <lightning-input class="slds-size_1-of-4" disabled={flag.disabled} name="flagName" value={flag.name} label="Flag Name"></lightning-input>
                    <lightning-input if:true={flag.requireValue} class="flag-input slds-size_2-of-4 slds-p-horizontal_x-small" name={flag.name} value="" label="Flag Value"></lightning-input>
                    <div class="slds-size_1-of-4 slds-grid slds-grid_align-end slds-align-bottom">
                        <lightning-button-icon class="slds-p-horizontal_x-small" icon-name="utility:add" variant="brand" onclick={handleAddFlag}></lightning-button-icon>
                        <lightning-button-icon class="slds-p-horizontal_x-small" if:true={flag.allowRemove} data-index={flag.index} icon-name="utility:delete" variant="bordered" onclick={handleRemoveFlag}></lightning-button-icon>
                    </div>
                </div>
            </template>
</div>
</div>
</lightning-tab>
<!-- Salesforce Direct Login -->
<lightning-tab icon-name="utility:apex_plugin" label="Salesforce Connection" value="login" onactive={handleActiveTab}>
    <div class="slds-grid slds-wrap">
        <template for:each={loginFields} for:item="field">
                        <div key={field} class="slds-size_6-of-12 slds-small-size_1-of-1 slds-medium-size_6-of-12 slds-p-around_small">
                        <lightning-input class="login-input" name={field} value="" label={field} required></lightning-input>
                    </div>
        </template>
    </div>
</lightning-tab>
</lightning-tabset>

<!-- Loading -->
<lightning-spinner if:true={loading} variant="brand" class="" alternative-text="loading..."></lightning-spinner>

<!-- RESPONSE -->
<div class="slds-p-around_small slds-grid slds-grid_vertical slds-grid_vertical-align-center">
    <!-- RUN GRAPH QL -->
    <lightning-button class="slds-text-align_center" label="Call GraphQL" variant="destructive" onclick={handleClick}></lightning-button>
    <lightning-textarea label="Response" value={response} class="slds-size_1-of-1" disabled></lightning-textarea>
</div>

<div slot="footer" class="slds-grid slds-grid_align-center">
    <!-- DOCS -->
    <a href="https://lwc.dev" class="slds-button slds-button_brand" target="_blank">Learn LWC</a>
    <a href="https://graphql.org" class="slds-button slds-button_neutral slds-theme_inverse" target="_blank">Learn GraphQL</a>
    <a href="https://developer.salesforce.com/tools/sfdxcli" class="slds-button slds-button_neutral slds-theme_error" target="_blank">Learn SFDX</a>
    <a href="https://jsforce.github.io/document/" class="slds-button slds-button_neutral slds-theme_warning" target="_blank">Learn JSForce</a>
</div>
</lightning-card>
</div>
</template>